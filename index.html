<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" href="css/index.css">
	</head>

	<body>

		<div id="main">
			<!-- list容器 -->
			<div id="nav_wraper">

			</div>

			<div id="menu_wraper">
				
			</div>
		</div>
	</body>
	<script src="js/data.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/view.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/listview.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/girdview.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/nav.js" type="text/javascript" charset="utf-8"></script>
	
	<script type="text/javascript">
		function page_init() {
			var ctrl = new Controller(GridView, list);
			var stackview = new StackView(document.getElementById("menu_wraper"), ctrl);	
	      
			var gridview = stackview.items[stackview.selected];
			console.log(stackview)

			var ctrl2 = new Controller(MenuItemView, items);
			var listview = new ListView(document.getElementById("nav_wraper"),ctrl2,null);


			
			
			listview.changeFocus(true);

			/*gridview.onItemClicked = function () {
				
			}
			*/
			document.onkeydown = function(e) {
				var key = e.keyCode;
				
				console.log("listview.isFocus is  " + listview.isFocus() );
				console.log("stackview.isFocus is  " + stackview.isFocus() );

				if(stackview.isFocus())
				{
					console.log("stack.onkeyEvent  " + key );
					var accept = stackview.onkeyEvent(key);
					//var isUp = true;//key
					if(!accept && key == 38)
					{
						stackview.changeFocus(false);
						listview.changeFocus(true);
					}
				}
				else if(listview.isFocus())
				{
					console.log("listview.onkeyEvent  " + key );
					var accept = listview.onKeyEvent(key);
					//console.log(accept);
					var isDown = true;//key
					if(!accept && key == 40)
					{
						
						gridview.setFocusShow();
						stackview.changeFocus(true);

						listview.changeFocus(false);
					}
				}
			   
//				var accpet = listview.onKeyEvent(key);
//				console.log("listview.onkeyevent is  " + accpet );
//				if(accpet)
//				{
//					//下
//					stackview.changeFocus(true);
//					listview.changeFocus(false);
//				}	
			}
		}
		
		page_init();
	</script>
</html>
